!function(){function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},i={},s=n.parcelRequirec913;function r(e){const t=new AudioContext(e);if("suspended"===t.state){const e=()=>{t.resume(),window.removeEventListener("click",e),window.removeEventListener("keydown",e)};window.addEventListener("click",e),window.addEventListener("keydown",e)}return t}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}null==s&&((s=function(e){if(e in o)return o[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){i[e]=t},n.parcelRequirec913=s),s.register("kWcpZ",(function(t,n){var o,i;e(t.exports,"register",(function(){return o}),(function(e){return o=e})),e(t.exports,"resolve",(function(){return i}),(function(e){return i=e}));var s={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)s[t[n]]=e[t[n]]},i=function(e){var t=s[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),s.register("9RkjR",(function(t,n){var o;e(t.exports,"getBundleURL",(function(){return o}),(function(e){return o=e}));var i={};function s(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}o=function(e){var t=i[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return s(e[2])}return"/"}(),i[e]=t),t}})),s("kWcpZ").register(JSON.parse('{"5T1iP":"index.4a2865ec.js","6PtMt":"music.d9429396.wav","2qOzP":"noise.796a9aa4.wav"}'));class c{constructor(e){this.node=e.listener}}function d(e){if("forwardX"in AudioListener.prototype)return new l(e);if("setOrientation"in AudioListener.prototype)return new h(e);throw new Error("Neither standard nor legacy support was detected for AudioListener")}class l extends c{setPosition(e,t,n){this.node.positionX.value=e,this.node.positionY.value=t,this.node.positionZ.value=n}setForward(e,t,n){this.node.forwardX.value=e,this.node.forwardY.value=t,this.node.forwardZ.value=n}setUp(e,t,n){this.node.upX.value=e,this.node.upY.value=t,this.node.upZ.value=n}setOrientation(e,t,n,o,i,s){this.setForward(e,t,n),this.setUp(o,i,s)}}class h extends c{setPosition(e,t,n){this.node.setPosition(e,t,n)}setForward(e,t,n){this.forward=[e,t,n],this.node.setOrientation(e,t,n,this.up[0],this.up[1],this.up[2])}setUp(e,t,n){this.up=[e,t,n],this.node.setOrientation(this.forward[0],this.forward[1],this.forward[2],e,t,n)}setOrientation(e,t,n,o,i,s){this.up=[o,i,s],this.forward=[e,t,n],this.node.setOrientation(e,t,n,o,i,s)}constructor(...e){super(...e),a(this,"up",[0,1,0]),a(this,"forward",[0,0,-1])}}class u{createSourceNode(e,t){const n=new AudioBufferSourceNode(this.node.context,t);return n.buffer=e,n.connect(this.node),n.start(),n.addEventListener("ended",(()=>this.onSoundEnded(n))),n}play(e,t){const n=this.createSourceNode(e,t);return this.sounds.push(n),n}playOnChannel(e,t,n){const o=this.createSourceNode(t,n),i=this.channels.get(e);return null==i||i.stop(),this.channels.set(e,o),o}stopChannel(e){const t=this.channels.get(e);t&&(t.stop(),this.channels.delete(e))}stopAll(){for(const e of this.sounds)e.stop();this.sounds.length=0;for(const e of this.channels.values())e.stop();this.channels.clear()}onSoundEnded(e){const t=this.sounds.indexOf(e);if(t>=0)this.sounds.splice(t,1);else for(const[t,n]of this.channels.entries())if(n===e)return void this.channels.delete(t)}constructor(e){a(this,"sounds",[]),a(this,"channels",new Map),this.node=e}}class f extends u{setGain(e){this.gainNode?this.gainNode.gain.value=e:console.error("Trying to set gain on an emitter, which has not been configured with gain!")}setPosition(e,t,n){this.node.positionX.value=e,this.node.positionY.value=t,this.node.positionZ.value=n}setOrientation(e,t,n){this.node.orientationX.value=e,this.node.orientationY.value=t,this.node.orientationZ.value=n}constructor(e,t){super(e.context.createPanner());const n=null==t?void 0:t.gain;void 0!==n?(this.gainNode=e.context.createGain(),this.gainNode.gain.value=n,this.gainNode.connect(e),this.node.connect(this.gainNode)):this.node.connect(e),t&&(void 0!==t.coneInnerAngle&&(this.node.coneInnerAngle=t.coneInnerAngle),void 0!==t.coneOuterAngle&&(this.node.coneOuterAngle=t.coneOuterAngle),void 0!==t.coneOuterGain&&(this.node.coneOuterGain=t.coneOuterGain),void 0!==t.maxDistance&&(this.node.maxDistance=t.maxDistance),void 0!==t.refDistance&&(this.node.refDistance=t.refDistance),t.distanceModel&&(this.node.distanceModel=t.distanceModel),t.panningModel&&(this.node.panningModel=t.panningModel),void 0!==t.rolloffFactor&&(this.node.rolloffFactor=t.rolloffFactor))}}const p=document.querySelector("main");function w(e,t,n){e.style.left=`${t}px`,e.style.top=`${n}px`}const g=Math.PI/180;async function v(e,t){const n=await fetch(t),o=await n.arrayBuffer();return e.decodeAudioData(o)}class y{update(e){let t=0;if(this.keys.ArrowRight&&(t+=1),this.keys.ArrowLeft&&(t-=1),this.angle=(360+this.angle+e*t*.2)%360,this.element.style.transform=`rotate(${this.angle}deg)`,(this.keys.ArrowUp||this.keys.ArrowDown)&&this.keys.ArrowUp!==this.keys.ArrowDown){const t=(this.keys.ArrowUp?this.angle-90:this.angle+90)*g,n=Math.cos(t),o=Math.sin(t),i=.1*e;this.x=Math.min(p.clientWidth-50,Math.max(50,this.x+n*i)),this.y=Math.min(p.clientHeight-50,Math.max(50,this.y+o*i)),w(this.element,this.x,this.y)}}constructor(){a(this,"element",document.getElementById("listener")),a(this,"x",p.clientWidth/2),a(this,"y",p.clientHeight/2),a(this,"angle",0),a(this,"keys",{ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1}),w(this.element,this.x,this.y),window.addEventListener("keydown",(e=>{e.code in this.keys&&(this.keys[e.code]=!0,e.preventDefault(),e.stopPropagation())})),window.addEventListener("keyup",(e=>{e.code in this.keys&&(this.keys[e.code]=!1,e.preventDefault(),e.stopPropagation())}))}}var m;m=s("9RkjR").getBundleURL("5T1iP")+s("kWcpZ").resolve("6PtMt");var x;function A(e){const t=new y,n=d(e);return n.setPosition(t.x,t.y,0),n.setUp(0,0,-1),e=>{const o=(t.angle+90)*g;let i=-Math.cos(o),s=Math.sin(o);const r=Math.sqrt(i**2+s**2);0!==r&&(i/=r,s/=r),n.setForward(i,-s,0),n.setPosition(t.x,t.y,0),t.update(e)}}x=s("9RkjR").getBundleURL("5T1iP")+s("kWcpZ").resolve("2qOzP"),async function(){const e=r(),n=A(e);await async function(e){const n=await v(e,t(m)),o=[p.clientWidth/4,p.clientHeight/2];w(document.getElementById("panner"),o[0],o[1]);const i=new f(e.destination,{panningModel:"HRTF",distanceModel:"exponential",coneInnerAngle:40,coneOuterAngle:140,coneOuterGain:0,refDistance:25,maxDistance:105,rolloffFactor:2});i.setPosition(o[0],o[1],0),i.setOrientation(0,-1,0),i.play(n,{loop:!0})}(e),await async function(e){const n=await v(e,t(x)),o=[3*p.clientWidth/4,p.clientHeight/2];w(document.getElementById("panner_nocone"),o[0],o[1]);const i=new f(e.destination,{panningModel:"HRTF",distanceModel:"exponential",refDistance:25,maxDistance:105,rolloffFactor:2});i.setPosition(o[0],o[1],0),i.play(n,{loop:!0})}(e),p.style.visibility="visible";let o=0;window.requestAnimationFrame((function e(t){const i=t-o;o=t,n(Math.min(32,i)),window.requestAnimationFrame(e)}))}()}();